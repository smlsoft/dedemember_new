(function(){"use strict";var e={296:function(e,t,n){var r=n(963),i=n(252);function o(e,t,n,r,o,l){const s=(0,i.up)("router-view");return(0,i.wg)(),(0,i.j4)(s)}var l={name:"App"},s=n(744);const a=(0,s.Z)(l,[["render",o]]);var u=a,c=n(201),d=n(577),f=n.p+"img/dedeim.0ca23b50.jpg",p=n(262),v=n(121),m=n(656);const g={class:"relative isolate overflow-hidden bg-white px-6 py-24 sm:py-32 lg:px-8 ml-4 mr-4"},h={class:"rounded-lg bg-gray-50 shadow-2xl ring-1 pt-2 ring-gray-900/5 mx-4 my-12"},y={class:"flex flex-wrap"},b=(0,i.uE)('<div class="flex-auto pl-6 pt-6"><div class="flex items-center justify-center"><div><img class="h-16 w-16 rounded-xl mx-auto" src="'+f+'" alt="User&#39;s picture"></div></div><div class="flex items-center justify-center"><div><div class="pt-6 rounded-xl mx-auto">Welcome to DEDE member</div></div></div></div><div class="flex-none self-end px-6 pt-4"><dt class="sr-only"></dt></div>',2),x={class:"flex-auto pl-6 pt-6"},w={class:"flex items-center"},_=["src"],k={class:"ml-3"},j={class:"text-sm font-medium text-gray-700 group-hover:text-gray-900"},O={class:"flex items-center mt-3"},H={class:"ml-3"},Z={key:0},D={class:"flex items-center mt-3"},S={class:"ml-3"},q=["value"],z={class:"mt-4 flex w-full flex-none gap-x-4 px-6"},I={class:"flex-none"},P={class:"sr-only"},E=(0,i._)("div",{class:"mt-6 border-t border-gray-900/5 px-6 py-6"},[(0,i._)("a",{href:"#",class:"text-sm font-semibold leading-6 text-gray-900"},[(0,i.Uk)("Enjoy with your meal "),(0,i._)("span",{"aria-hidden":"true"})])],-1),M=(0,i._)("div",{class:"absolute inset-0 -z-10 bg-[radial-gradient(45rem_50rem_at_top,theme(colors.indigo.100),white)] opacity-20"},null,-1),T=(0,i._)("div",{class:"absolute inset-y-0 right-1/2 -z-10 mr-16 w-[200%] origin-bottom-left skew-x-[-30deg] bg-orange-500 shadow-xl shadow-indigo-600/10 ring-1 ring-indigo-50 sm:mr-28 lg:mr-0 xl:mr-16 xl:origin-center"},null,-1),A=(0,i._)("div",null,null,-1);var C={__name:"HelloWorld",setup(e){const t=(0,p.iH)(""),n=(0,p.iH)(""),r=(0,p.iH)(""),o=(0,p.iH)(""),l=(0,p.iH)(""),s=(0,p.iH)(""),a=(0,c.yj)(),u=(0,p.iH)(!0),f=(0,p.iH)(!1),C=(0,p.iH)(""),U=(0,p.iH)(""),F=(0,p.iH)("");async function L(){try{const e=await m.Z.getFriendship();return s.value=e,s.value.friendFlag}catch(e){return console.error("Error fetching friendship status:",e),!1}}async function W(){u.value=await L(),console.log(u.value),0==u.value?(alert("please add friend"),window.location.href="https://lin.ee/qdbnDDV"):J()}function $(){X({telephone:C.value})}function B(){m.Z.init({liffId:"2001677131-XKqMJqML"},(()=>{m.Z.isLoggedIn()?W():m.Z.login()}),(e=>console.error(e)))}function J(){l.value=m.Z.getAccessToken(),console.log("lift Token: ",l.value),m.Z.getProfile().then((e=>{o.value=e.displayName,t.value=e.pictureUrl,r.value=e.statusMessage,n.value=e.userId,K(l.value)})).catch((e=>console.error(e)))}function K(e){const t=a.query.shopid,n={shopid:t,lineaccesstoken:e};v.Z.post("https://memberapi.dev.dedepos.com/member/line/",n).then((e=>{const t=e.data.success??!1;t?(localStorage.setItem("_token",e.data.id),V()):alert("login failed"),f.value=!0}))}function N(){U.value=localStorage.getItem("_token")}function V(){if(""==U.value)return;const e={headers:{Authorization:`Bearer ${U.value}`}};v.Z.get("https://memberapi.dev.dedepos.com/member/line/profile",e).then((e=>{const t=e.data.success??!1;t&&(F.value=e.data.data.telephone)}))}function X({telephone:e}){if(""==U.value)return;const t={headers:{Authorization:`Bearer ${U.value}`}},n={telephone:e};v.Z.put("https://memberapi.dev.dedepos.com/member/line/profile",n,t).then((e=>{const t=e.data.success??!1;t?alert("update success"):alert("update failed")}))}return(0,i.bv)((()=>{B(),N()})),(e,r)=>{const l=(0,i.up)("CalendarDaysIcon");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("section",g,[(0,i._)("div",h,[(0,i._)("dl",y,[b,(0,i._)("div",x,[(0,i._)("div",w,[(0,i._)("div",null,[t.value?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"inline-block h-9 w-9 rounded-full",src:t.value,alt:"User's picture"},null,8,_)):(0,i.kq)("",!0)]),(0,i._)("div",k,[(0,i._)("p",j,(0,d.zw)(o.value),1)])]),(0,i._)("div",O,[(0,i._)("div",H," Shop ID: "+(0,d.zw)(e.$route.query.shopid),1)]),f.value?((0,i.wg)(),(0,i.iD)("div",Z,[(0,i._)("div",D,[(0,i._)("div",S,[(0,i._)("input",{type:"text",value:C.value,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Phone number"},null,8,q)])]),(0,i._)("div",{class:"items-center mt-3"},[(0,i._)("div",{class:"ml-3"},[(0,i._)("button",{type:"button",class:"rounded-md bg-white px-2.5 py-1.5 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",onClick:$},"บันทึก")])])])):(0,i.kq)("",!0)]),(0,i._)("div",z,[(0,i._)("dt",I,[(0,i._)("span",P,(0,d.zw)(n.value),1),(0,i.Wm)(l,{class:"h-6 w-5 text-gray-400","aria-hidden":"true"})])])]),E]),M,T]),A],64)}}};const U=C;var F=U,L=n(638);const W=[{path:"/",component:F},{path:"/:shopid",component:F}],$=(0,c.p7)({history:(0,c.PO)(),routes:W}),B=(0,r.ri)(u);B.use(L.Z),B.use($),B.mount("#app")}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,r,i,o){if(!r){var l=1/0;for(c=0;c<e.length;c++){r=e[c][0],i=e[c][1],o=e[c][2];for(var s=!0,a=0;a<r.length;a++)(!1&o||l>=o)&&Object.keys(n.O).every((function(e){return n.O[e](r[a])}))?r.splice(a--,1):(s=!1,o<l&&(l=o));if(s){e.splice(c--,1);var u=i();void 0!==u&&(t=u)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[r,i,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/dedememberLiff_new/"}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var i,o,l=r[0],s=r[1],a=r[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(a)var c=a(n)}for(t&&t(r);u<l.length;u++)o=l[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},r=self["webpackChunknewliff"]=self["webpackChunknewliff"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(296)}));r=n.O(r)})();